<!DOCTYPE html>
<!-- =====================
    Variables
    ===================== -->
{{- $css := partial "head/_styles.html" (append "scss/app.scss" .Params.styles) -}}
{{- $js := partial "head/_scripts.html" (append "js/app.ts" .Params.scripts) -}}
{{/*{{ $hash := .GitInfo.AbbreviatedHash }}*/}}
{{- $hash := now.Unix -}}
{{- $baseURL := partial "util/_base-url.html" . -}}
<!-- =====================
    HTML
    ===================== -->
<html class="no-js" lang="en-GB">
    <head>
		<!--- TODO, removed when finished -->
		<meta name="robots" content="noindex">
        <!-- Meta -->
		<meta http-equiv="content-type" content="text/html; charset=utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=Edge">
		<meta name="viewport" content="width=device-width, height=device-height, initial-scale=1">
		<meta name="apple-mobile-web-app-capable" content="yes" />
        <title>{{ with .Params.title -}} {{ . }} | {{ end }}{{ .Site.Title }}</title>
		<!-- Description -->
        {{ if and (not .IsHome) (eq .Description "") }}
			{{ warnf "No meta description for page: %s" .RelPermalink }}
		{{- end }}
		<meta name="description"
			  content="{{ if .IsHome -}} {{ $.Site.Params.description }} {{- else -}} {{ .Description }} {{- end }}"/>
		<!-- Canonical -->
		<link rel="canonical"
			  href="{{ with .Params.canonical -}} {{ . }} {{- else -}} {{ printf "%s%s" $baseURL .RelPermalink }} {{- end }}"/>
		<!-- Base -->
        {{ if eq (getenv "VERCEL_ENV") "production" -}}
			<base href="{{ $baseURL }}">
		{{- end }}
		<script>window.BaseURL = {{ $baseURL }};</script>
		<!-- Schema -->
		 {{ partial "head/schema.html" . }}
        <!-- Open Graph -->
        {{ partial "head/opengraph.html" . }}
        <!-- Twitter -->
        {{ partial "head/twitter.html" . }}
        <!-- CSS -->
        {{ range $css -}}
			<link rel="stylesheet" href="{{ .RelPermalink }}?{{ $hash }}">
        {{- end }}
		<!-- No JS -->
        {{ with index (partial "head/_styles.html" (slice "scss/no-js.scss")) 0 }}
			<noscript>
				<link rel="stylesheet" href="{{ .RelPermalink }}?{{ $hash }}">
			</noscript>
		{{ end }}
		<!-- Preload JS -->
		{{ range $js -}}
			<link rel="preload"
				href="{{ .RelPermalink }}?{{ $hash }}"
				{{ if ne hugo.Environment "development" -}}
                	{{ with .Data.Integrity }} integrity="{{ . }}" crossorigin="anonymous" {{- end }}
				{{ end }}
				as="script">
		{{- end }}
        <!-- Favicon -->
		<link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png">
		<link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
		<link rel="manifest" href="/favicon/site.webmanifest" crossorigin="use-credentials">
		<link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#0a0a0a">
		<meta name="msapplication-TileColor" content="#0a0a0a">
		<meta name="theme-color" content="#0a0a0a">
		<!-- Schema - Organisation -->
		{{ with .Site.Data.schema.organisation -}}
			<script type="application/ld+json">
				{{ . }}
			</script>
		{{- end }}
		<!-- Schema - Navigational -->
		{{ partial "head/schema-navigational.html" (dict "site" . "menus" .Site.Menus.footer) }}
    </head>
	<!-- =====================
		Body
		===================== -->
    {{ $colour := "black" }}
    {{ if eq .Params.pagecolour "white"}}
        {{ $colour = .Params.pagecolour }}
    {{ end }}
    <body class="theme-{{ $colour }}">
		<div data-scroll-container>
			<!-- Header -->
			{{- partial "header.html" (dict "colour" $colour) -}}
			<!-- Cursor -->
			<div class="cursor"></div>
			<!-- Wrapper -->
			<div class="content-wrapper">
				<!-- Main Content -->
				<main id="main">
					{{- block "main" . }}{{- end }}
				</main>
				<!-- Footer -->
				{{- partial "footer.html" . -}}
			</div>
		</div>
        <!-- Javascript -->
		{{ range $js -}}
			<script src="{{ .RelPermalink }}?{{ $hash }}"
				{{ if ne hugo.Environment "development" -}}
					{{ with .Data.Integrity }} integrity="{{ . }}" crossorigin="anonymous" {{- end }}
				{{ end }}>
			</script>
		{{- end }}
        <!-- Google Transition Fix -->
        <script> </script>
    </body>
</html>
