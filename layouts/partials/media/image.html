<!-- =====================
    Image
		partial "media/image.html" ("image" (resources.Get "hello.jpg") "lazy" true "class" "class-name")
		- image:	The image resource, this has to be parsed or an error will be thrown.
		- lazy:		If the image should be lazy loaded, defaults to false.
		- class:	Any class names to be appended to the <picture> element.
    ===================== -->
{{ if .image }}
	<!-- SVG -->
	{{ if eq .image.MediaType.SubType "svg" }}
		<img {{ if .lazy }} loading="lazy" {{- end }}
			src="{{ .image.RelPermalink }}"
			class="{{ with .class -}} {{ . }} {{- end }}"
			alt="{{ with .alt -}} {{ . }} {{- end }}"/>
	{{- else -}}
		<!-- Original - AVIF/WebP -->
        {{ if site.Params.config.webpAvif -}}
            {{ $noExtension := strings.TrimSuffix (path.Ext .image.RelPermalink) .image.RelPermalink }}
			<!-- AVIF -->
			<img {{ if .lazy }} loading="lazy" {{- end }}
				src="{{ $noExtension }}.avif"
				class="{{ with .class -}} {{ . }} {{- end }}"
				alt="{{ with .alt -}} {{ . }} {{- end }}"
				type="image/avif"
				width="{{ .image.Width }}" height="{{ .image.Height }}"/>
			<!-- WebP -->
			<img {{ if .lazy }} loading="lazy" {{- end }}
				src="{{ $noExtension }}.webp"
                    {{ with .class -}} class="{{ . }}" {{- end }}
				alt="{{ with .alt -}} {{ . }} {{- end }}"
				type="image/webp"
				width="{{ .image.Width }}" height="{{ .image.Height }}"/>
        {{- end }}
		<!-- Original - Image -->
		<img {{ if .lazy }} loading="lazy" {{- end }}
			src="{{ .image.RelPermalink }}"
			class="{{ with .class -}} {{ . }} {{- end }}"
			alt="{{ with .alt -}} {{ . }} {{- end }}"
			width="{{ .image.Width }}" height="{{ .image.Height }}"/>
	{{- end }}
{{- else -}}
    {{ warnf "Image not found with url: %v" .image }}
{{- end }}
