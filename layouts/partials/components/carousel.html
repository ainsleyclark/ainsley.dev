<!-- =====================
    Button
    	partial "components/carousel.html" (dict
    		"ctx" .
    		"images" (slice
				(dict
					"image" "image.jpg"
					"alt" "Alt text"
				)
			)
    	)
    	- ctx: 			The context of the page.
    	- images: 		Key, value pair of images and alt text.
    ===================== -->
{{ define "partials/carousel-item.html" -}}
	<div data-scroll data-scrol-speed="{{ mul .index 1 }}">
		<div class="carousel-item">
            {{ partial "media/picture.html" (dict
				"image" (.ctx.Resources.GetMatch .item.image)
				"alt" .item.alt
				"lazy" false
				"class" "carousel-image"
            )}}
		</div>
	</div>
{{- end }}
{{ with .images }}
	{{ $length := len . }}
	<div class="carousel" data-carousel-length="{{ $length }}">
		<style>
			@keyframes scroll {
				0% {
					transform: translateX(0);
				}
				100% {
					transform: translateX(calc(-1 * clamp(320px, 80vw, 570px) * {{ $length }}));
				}
			}
			.carousel-item {
				animation: scroll {{ mul $length 3 }}s linear infinite;
			}
		</style>
		<!-- Original -->
		{{ range $index, $item := . }}
			{{ partial "partials/carousel-item.html" (dict
				"ctx" $.ctx
				"item" $item
				"index" $index
			)}}
		{{- end }}
		<!-- Repeat -->
        {{ range $index, $item := . }}
            {{ partial "partials/carousel-item.html" (dict
				"ctx" $.ctx
				"item" $item
				"index" $index
            )}}
		{{- end }}
	</div>
{{- end }}
