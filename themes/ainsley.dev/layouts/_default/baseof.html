<!DOCTYPE html>
<!-- =====================
    Variables
    ===================== -->
<!-- CSS -->
{{ $cssPath := "css/app.css" }}
{{ $cssOpts := (dict "targetPath" $cssPath "enableSourceMap" true ) }}
{{ if ne hugo.Environment "development" -}}
    {{ $cssOpts := (dict "targetPath" $cssPath "enableSourceMap" false "outputStyle" "compressed") }}
{{ end }}
{{ $style := resources.Get "scss/app.scss" | resources.ExecuteAsTemplate "css/app.css" . | toCSS $cssOpts  }}
<!-- JS -->
{{ $jsPath := "js/app.ts" }}
{{ $jsOpts := (dict "targetPath" $jsPath "minify" false) }}
{{ if ne hugo.Environment "development" -}}
    {{ $jsOpts := (dict "targetPath" $jsPath "minify" true) }}
{{ end }}
{{ $js := resources.Get "js/app.js" | js.Build $jsOpts }}
<!-- =====================
    HTML
    ===================== -->
<html class="no-js">
    <head>
        <!-- Meta -->
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>{{ .Site.Title }}</title>
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <meta name="description" content="{{ $.Site.Params.description }}">
        <link rel="canonical" href="{{ .Site.BaseURL }}" />
		<!-- Base -->
		<base href="{{ .Site.BaseURL }}">
		<script>window.BaseURL = {{ .Site.BaseURL }};</script>
        <!-- Open Graph -->
        {{ template "_internal/opengraph.html" . }}
        <!-- Twitter -->
        {{ template "_internal/twitter_cards.html" . }}
        <!-- Google Analytics -->
        {{ if eq hugo.Environment "production" -}}
       	 {{ template "_internal/google_analytics_async.html" . }}
        {{ end }}
        <!-- CSS -->
		<link rel="stylesheet" href="{{ $style.Permalink }}">
		<!-- Preload JS -->
        <link rel="preload" href="{{ $js.Permalink }}" as="script">
        <!-- Favicon -->
    </head>
	<!-- =====================
		Body
		===================== -->
    {{ $colour := "black" }}
    {{ if eq .Params.page_colour "white"}}
        {{ $colour = .Params.page_colour }}
    {{ end }}
    <body class="theme-{{ $colour }}">
        <!-- Header -->
        {{- partial "header.html" (dict "global" .Site "colour" $colour) -}}
        <!-- Main Content -->
        <main>
            <div id="content">
                {{- block "main" . }}{{- end }}
            </div>
        </main>
        <!-- Footer -->
        {{- partial "footer.html" . -}}
        <!-- Javascript -->
        <script src="{{ $js.Permalink }}"></script>
        <!-- Google Transition Fix -->
        <script> </script>
    </body>
</html>
